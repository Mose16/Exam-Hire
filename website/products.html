<!DOCTYPE.html>
<html>
	%include('Shared/header.html')
	<head>
		<link href="/css/products.css" rel="stylesheet" type="text/css">
		<link href="/script/products.js">
		<script src="jquery-3.3.1.min.js"></script>
	</head>
	<body>
		<div class="grid">
			<div id="top"> 
				<p>Rent a Bro</p> 
				<div class="dropdown">
					<i class="material-icons" style="font-size: 40px;">view_module</i>
					<div class="dropdown-content">
						<a href="poo poo"><div><p>Meet The Bros</p></div></a>
						<a href=""><div><p>Write A Review</p></div></a>
						<a href=""><div><p>Apply To Be A Bro</p></div></a>
					</div>
				</div>
			</div>
			<div id="center"> 
				%for bro in bros_list:
					<div id="{{bro.name}}">
						<h1>{{bro.name}}</h1>
					</div>
				%end
			</div>
			<div id="bottom">
				<p style="display:inline">Dont be dissapointed when you see the products.  |</p> <address style="display:inline">admin@rentabro.co.nz</address>
			</div>
			<div id="fill" style="width:100vw; height:0;">
			</div>
		</div>
	</body>
	
	<script>
		var divs = document.querySelectorAll('#center div');
		console.log(divs.length);
		var speed = 2;
		var prev_scroll = 0
		var fill = document.getElementById("fill");
		
		for (i = 0; i < divs.length; i++) {
			divs[i].style.marginTop = 0;
		};

		window.addEventListener('scroll', function() {
			for (i = 0; i < divs.length; i++) {
				//animationY(divs[i].id);
				animationY(divs[1].id);
				animationX(divs[2].id);
			};
		});
		
		function animationY(id) {
			var rect = document.getElementById("bottom").getBoundingClientRect();
			if (pageYOffset <= (document.body.offsetHeight + parseInt(fill.style.height) - window.innerHeight)) {
				console.log(id);
				var elmnt = document.getElementById(id);
				elmnt.style.marginTop = -(pageYOffset * speed);
				fill.style.height = (pageYOffset * speed);
				console.log(pageYOffset, document.body.offsetHeight, parseInt(fill.style.height), (document.body.offsetHeight + fill.style.height - window.innerHeight))
			} else {
				console.log(pageYOffset, document.body.offsetHeight, parseInt(fill.style.height), (document.body.offsetHeight + fill.style.height - window.innerHeight))
			}
		};
		function animationX(id) {
	
		};
	</script>
</html>